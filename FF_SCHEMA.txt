CREATE TABLE `drivers` ( 
  `id` CHAR(26) NOT NULL,
  `code` VARCHAR(255) NOT NULL,
  `employee_code` VARCHAR(255) NULL DEFAULT NULL ,
  `company_id` CHAR(26) NOT NULL,
  `first_name_th` VARCHAR(255) NOT NULL,
  `last_name_th` VARCHAR(255) NOT NULL,
  `nick_name_th` VARCHAR(255) NULL DEFAULT NULL ,
  `first_name_en` VARCHAR(255) NULL DEFAULT NULL ,
  `last_name_en` VARCHAR(255) NULL DEFAULT NULL ,
  `nick_name_en` VARCHAR(255) NULL DEFAULT NULL ,
  `phone_number` VARCHAR(255) NULL DEFAULT NULL ,
  `pin_number` VARCHAR(255) NULL DEFAULT NULL ,
  `fcm_token` VARCHAR(255) NULL DEFAULT NULL ,
  `need_verify_otp` TINYINT NOT NULL DEFAULT 1 ,
  `birth_date` DATE NULL DEFAULT NULL ,
  `email` VARCHAR(255) NULL DEFAULT NULL ,
  `personal_info_updated_at` TIMESTAMP NULL DEFAULT NULL ,
  `current_address` LONGTEXT NULL DEFAULT NULL ,
  `registered_address` LONGTEXT NULL DEFAULT NULL ,
  `use_registered_address` TINYINT NOT NULL DEFAULT 0 ,
  `address_info_updated_at` TIMESTAMP NULL DEFAULT NULL ,
  `profile_image` VARCHAR(255) NULL DEFAULT NULL ,
  `additional_profile_images` LONGTEXT NULL DEFAULT NULL ,
  `emergency_contacts` LONGTEXT NULL DEFAULT NULL ,
  `emergency_contact_updated_at` TIMESTAMP NULL DEFAULT NULL ,
  `employment_date` DATE NULL DEFAULT NULL ,
  `employment_end_date` DATE NULL DEFAULT NULL ,
  `latest_status` ENUM('check_in','personal_leave','late_check_in','check_out','no_recorded_time') NULL DEFAULT NULL ,
  `is_accepting_job` TINYINT NOT NULL DEFAULT 1  COMMENT 'Indicates if the driver is currently accepting new job assignments' ,
  `latest_status_updated` TIMESTAMP NULL DEFAULT NULL ,
  `metadata` LONGTEXT NULL DEFAULT NULL ,
  `employment_type` ENUM('full_time','part_time','contract','resigned') NULL DEFAULT NULL ,
  `social_security_registered` TINYINT UNSIGNED NOT NULL DEFAULT 0 ,
  `gross_salary` DECIMAL(10,2) NULL DEFAULT NULL ,
  `social_security_deduct` DECIMAL(10,2) NULL DEFAULT NULL ,
  `tax_deduct` DECIMAL(10,2) NULL DEFAULT NULL ,
  `net_salary` DECIMAL(10,2) NULL DEFAULT NULL ,
  `employee_info_updated_at` TIMESTAMP NULL DEFAULT NULL ,
  `payment_method` ENUM('transfer','cash') NULL DEFAULT NULL ,
  `bank_name` VARCHAR(255) NULL DEFAULT NULL ,
  `bank_branch_name` VARCHAR(255) NULL DEFAULT NULL ,
  `bank_account_type` ENUM('savings','current','digital') NULL DEFAULT NULL ,
  `bank_account_number` VARCHAR(255) NULL DEFAULT NULL ,
  `bank_book_file_url` VARCHAR(255) NULL DEFAULT NULL ,
  `payment_channel_updated_at` TIMESTAMP NULL DEFAULT NULL ,
  `truck_id_matching` CHAR(26) NULL DEFAULT NULL ,
  `truck_matching_updated_at` TIMESTAMP NULL DEFAULT NULL ,
  `created_by` CHAR(26) NULL DEFAULT NULL ,
  `updated_by` CHAR(26) NULL DEFAULT NULL ,
  `created_at` TIMESTAMP NULL DEFAULT NULL ,
  `updated_at` TIMESTAMP NULL DEFAULT NULL ,
  `deleted_at` TIMESTAMP NULL DEFAULT NULL ,
   PRIMARY KEY (`id`),
  CONSTRAINT `drivers_code_unique` UNIQUE (`code`)
)
ENGINE = InnoDB;
CREATE TABLE `fleet_jobs` ( 
  `id` CHAR(26) NOT NULL,
  `code` VARCHAR(20) NOT NULL,
  `sumo_job_code` VARCHAR(255) NULL DEFAULT NULL ,
  `next_job_id` CHAR(26) NULL DEFAULT NULL ,
  `driver_id` CHAR(26) NULL DEFAULT NULL ,
  `vehicle_id` CHAR(26) NULL DEFAULT NULL ,
  `customer_id` CHAR(26) NULL DEFAULT NULL ,
  `company_id` CHAR(26) NOT NULL,
  `job_type_id` CHAR(26) NULL DEFAULT NULL ,
  `service_fee` DECIMAL(10,2) NOT NULL,
  `is_discounted` TINYINT NOT NULL DEFAULT 0 ,
  `discount_type` ENUM('fixed','percentage') NULL DEFAULT NULL ,
  `discount_amount` DECIMAL(10,2) NULL DEFAULT NULL ,
  `is_couponed` TINYINT NOT NULL DEFAULT 0 ,
  `coupon_id` CHAR(26) NULL DEFAULT NULL ,
  `is_taxable` TINYINT NOT NULL DEFAULT 0 ,
  `tax_rate` DECIMAL(5,2) NULL DEFAULT NULL ,
  `tax_amount` DECIMAL(10,2) NULL DEFAULT NULL ,
  `grand_total` DECIMAL(10,2) NOT NULL,
  `job_status` ENUM('draft','scheduled','accepted','in_progress','completed','cancelled','quotation','sumo_draft') NOT NULL DEFAULT 'scheduled' ,
  `quotation_id` CHAR(26) NULL DEFAULT NULL ,
  `billing_note_id` CHAR(26) NULL DEFAULT NULL ,
  `tax_invoice_id` CHAR(26) NULL DEFAULT NULL ,
  `receipt_id` CHAR(26) NULL DEFAULT NULL ,
  `withholding_tax_id` CHAR(26) NULL DEFAULT NULL ,
  `payment_status` ENUM('paid','pending','failed','refunded') NOT NULL DEFAULT 'pending' ,
  `pay_with_driver` TINYINT NOT NULL DEFAULT 0 ,
  `contact_phone` VARCHAR(20) NULL DEFAULT NULL ,
  `job_note` TEXT NULL DEFAULT NULL ,
  `vehicle_shipment_details` LONGTEXT NULL DEFAULT NULL ,
  `is_reserved` TINYINT NOT NULL DEFAULT 0 ,
  `service_date` DATETIME NOT NULL,
  `load_type` ENUM('vehicle','misc') NULL DEFAULT NULL ,
  `load_details` LONGTEXT NULL DEFAULT NULL ,
  `created_by` CHAR(26) NOT NULL,
  `updated_by` CHAR(26) NULL DEFAULT NULL ,
  `deleted_by` CHAR(26) NULL DEFAULT NULL ,
  `created_at` TIMESTAMP NULL DEFAULT NULL ,
  `updated_at` TIMESTAMP NULL DEFAULT NULL ,
  `deleted_at` TIMESTAMP NULL DEFAULT NULL ,
  `distance_km` VARCHAR(255) NULL DEFAULT NULL ,
   PRIMARY KEY (`id`)
)
ENGINE = InnoDB;
CREATE TABLE `inspections` ( 
  `id` CHAR(26) NOT NULL,
  `code` VARCHAR(255) NOT NULL,
  `company_id` CHAR(26) NOT NULL,
  `vehicle_id` CHAR(26) NOT NULL,
  `driver_id` CHAR(26) NULL DEFAULT NULL ,
  `period` ENUM('anytime','before_checkin','after_checkin') NOT NULL,
  `inspection_date` DATE NOT NULL,
  `status` ENUM('pending','in_progress','completed','late','cancelled') NOT NULL DEFAULT 'pending' ,
  `result` ENUM('passed','wait_result','failed') NULL DEFAULT NULL ,
  `remark` TEXT NULL DEFAULT NULL ,
  `created_at` TIMESTAMP NULL DEFAULT NULL ,
  `updated_at` TIMESTAMP NULL DEFAULT NULL ,
  `deleted_at` TIMESTAMP NULL DEFAULT NULL ,
  `created_by` CHAR(26) NOT NULL,
  `updated_by` CHAR(26) NULL DEFAULT NULL ,
  `deleted_by` CHAR(26) NULL DEFAULT NULL ,
   PRIMARY KEY (`id`)
)
ENGINE = InnoDB;
CREATE TABLE `vehicles` ( 
  `id` CHAR(26) NOT NULL,
  `code` VARCHAR(255) NOT NULL,
  `company_id` CHAR(26) NULL DEFAULT NULL ,
  `type_id` CHAR(26) NULL DEFAULT NULL ,
  `license_plate_type` ENUM('white_green','white_black','yellow_black') NULL DEFAULT NULL ,
  `license_plate_number` VARCHAR(255) NULL DEFAULT NULL ,
  `registered_province` INT NULL DEFAULT NULL ,
  `registered_date` DATE NULL DEFAULT NULL ,
  `title` VARCHAR(255) NULL DEFAULT NULL ,
  `custom_code` VARCHAR(255) NULL DEFAULT NULL ,
  `brand_id` CHAR(26) NULL DEFAULT NULL ,
  `model` VARCHAR(255) NULL DEFAULT NULL ,
  `color` VARCHAR(255) NULL DEFAULT NULL ,
  `vin` VARCHAR(255) NULL DEFAULT NULL ,
  `engine_number` VARCHAR(255) NULL DEFAULT NULL ,
  `slider_width` DECIMAL(8,2) NULL DEFAULT NULL ,
  `slider_height` DECIMAL(8,2) NULL DEFAULT NULL ,
  `maximum_load` DECIMAL(10,2) NULL DEFAULT NULL ,
  `total_mileage` DECIMAL(12,2) NULL DEFAULT NULL ,
  `metadata` LONGTEXT NULL DEFAULT NULL ,
  `latest_status` ENUM('available','in_use','checkup','maintenance','out_of_service') NOT NULL DEFAULT 'available' ,
  `latest_status_date` TIMESTAMP NULL DEFAULT NULL ,
  `latest_checkup_date` TIMESTAMP NULL DEFAULT NULL ,
  `latest_maintenance_date` TIMESTAMP NULL DEFAULT NULL ,
  `created_by` CHAR(26) NULL DEFAULT NULL ,
  `updated_by` CHAR(26) NULL DEFAULT NULL ,
  `created_at` TIMESTAMP NULL DEFAULT NULL ,
  `updated_at` TIMESTAMP NULL DEFAULT NULL ,
  `deleted_at` TIMESTAMP NULL DEFAULT NULL ,
   PRIMARY KEY (`id`),
  CONSTRAINT `unique_plate_province_type` UNIQUE (`license_plate_number`, `registered_province`, `license_plate_type`)
)
ENGINE = InnoDB;
